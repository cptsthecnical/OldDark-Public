# Habilitar la autenticaci√≥n de nivel de red (NLA) en el servidor RDP remoto. 
# Esto generalmente se hace en la pesta√±a 'Remoto' de la configuraci√≥n 'Sistema' en Windows.
************************************************************************************************************************************************************************
# Esto significa que el servidor no carga la interfaz de escritorio completa hasta que la autenticaci√≥n sea exitosa, reduciendo la exposici√≥n a ataques.
# Sin NLA habilitado, un atacante puede intentar ataques de fuerza bruta contra RDP sin restricciones entre otras muchas opciones.

# configuraci√≥n simple
Windows + R
sysdm.cpl
> Acceso remoto (o simplemente Remoto)
  [x] Permitir las conexiones remotas a este equipo
  [x] Permitir conexiones solo desde equipos que ejecuten Escritorio remoto con Autenticaci√≥n a nivel de red (NLA) (Recomendado) 
      || "Allow connections only from computers running remote desktop with network level authentication (recommended)"









https://www.sysadmit.com/2020/03/windows-cambiar-red-publica-privada.html












Abrir Configuraci√≥n del sistema:

Win + R ‚Üí escribe sysdm.cpl ‚Üí Enter.

Ir a la pesta√±a ‚ÄúNombre de equipo‚Äù.

Pulsa ‚ÄúCambiar‚Ä¶‚Äù.

Seleccionar ‚ÄúDominio‚Äù e introduce el nombre del dominio AD (por ejemplo: empresa.local).

Autenticarse:

Introduce un usuario con permisos para unir equipos al dominio.

Reiniciar el equipo.

‚úÖ Comprobaci√≥n:

En consola, ejecuta:

whoami /fqdn











============[ 2. Directorio activo ]===================================================

[üî• En el caso de portatil no hay que hacerlo.]
# Una vez formateado: 
	Este equipo (bot√≥n derecho) > Propiedades > Sistema > Informaci√≥n - Dominio o grupo de trabajo
	(Descripci√≥n vac√≠a) - Cambiar:
		# active directory solo sirve para comprobar el registro centralizado de recursos en una red, el sistema de carpetas se almacenan en local pero el active directory s√≠ que est√° asociado a ese equipo
		# esto quiere decir que si ya existe un equipo al que tengo que sustituir tengo que eliminar el equipo con ese mismo nombre porque si no me va a dar un error de que ya existe un equipo asociado ("Error al validar el nombre de 'Isaac-PC'")
		# una vez haya borrado del servidor el equipo asociado al active directory ya me dejar√° registrarme con ese nombre del AD en el equipo formateado
		# Para borrar un equipo desde el servidor de DC: Usuarios y equipos de active directory > grafometal.local > Computers > ISAAC-PC (bot√≥n derecho - eliminar)
		# lo que s√≠ que afecta en el active directory en el caso de que se desvincule el pc (computer) del usuario de active directory es que en el caso de querer conectarse por remoto se va a intentar conectar al formateado por eso es bueno si va a pasar mucho tiempo volver a cambiarlo...
		# üî• una vez eliminado el equipo del servidor de active directory para estar en dominio y poder entrar con remoto, tengo que agregar el equipo de dominio desde el equipo del usuario y no desde el servidor
		Nombre de equipo: <NOMBRE-PC>										            		# ISAAC-PC (el nombre del equipo de AD siempre en may√∫sculas)
		Dominio: <DOMINIO>																		# grafometal.local
			Aceptar >																			# Me registro con la cuenta de administrador para comprobar el acceso
	
	# Se uni√≥ correctamente al dominio <DOMINIO>
	# reiniciar
	# GRAFOMETAL\<NOMBRE_DE_USUARIO>

============[ 3. Acceso remoto ]=======================================================

[üî• En el caso de portatil no hay que hacerlo.]	
# En el caso de que necesite acceder por acceso remoto
	Panel de control > Sistema de seguridad > Opciones de energ√≠a >
	Elegir el comportamiento de los botones de inicio/apagado
	Cambiar la configuraci√≥n actualmente no disponible   					  					# clicar
		[ ] Hibernar                                        				  					# quitar el check de Hibernar
		
	Panel de control > Sistema de seguridad > Opciones de energ√≠a >
	Cambiar frecuencia con la que el equipo entra en estado de suspensi√≥n
	Canbiar la configuraci√≥n del plan
		Poner al equipo en estado de suspensi√≥n
			[x] Nunca


# Agregar el usuario al remoto del equipo
	# Me dirijo a inicio 
	Tecla Super + R 																			# (bot√≥n derecho) > ejecutar
	Lusrmgr.msc                     										            		# Ctrl + Shift + Enter para abrirlo como Administrador
		Grupos > Usuarios de escritorio remoto
			Agregar : <NOMBRE_DE_USUARIO>
				Comprobar nombre
	Aceptar y guardar

# segunda opci√≥n de agregar el usuario al remoto del equipo
#	Bto√≥n derecho en inicio > Sistema > Sistema > Escritorio Remoto > Usuarios de escritorio remoto > 
#	Agregar > Opciones avanzadas > 
#		Desde esta ubicaci√≥n: <DOMINIO>
#		Buscar ahora > "seleccionar usuario"
	
